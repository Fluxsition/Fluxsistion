<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flux — Loading</title>
  <style>
    :root{
      --bg-0:#050505;
      --bg-1:#0b0b0f;
      --fg:#e8e8e8;
      --muted:#b8c3cf;
      --accent:#36d1ff;
      --glow:#36d1ff40;
      --border:#111318;
      --panel-top:#0b0b0f;
      --panel-bot:#090909;
      --soft:#1a1f27;
      --soft-2:#0a0d12;
      --ok:#4ad295;
      --card:#0d1116;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 50% 20%, var(--bg-1), var(--bg-0));
      color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;
      overflow:hidden;
    }

    /* canvas for chips already present and below we draw on it */
    #chips{ position:fixed; inset:0; z-index:0; display:block; }
    .vignette{position:fixed; inset:-10%; z-index:1; pointer-events:none; background: radial-gradient(1200px 800px at 50% 30%, transparent 0%, transparent 60%, #0007 100%);}    

    .center{ position:fixed; inset:0; z-index:2; display:grid; place-items:center; padding:2rem; transition: opacity .7s ease, visibility .7s ease; }
    .hidden{opacity:0; visibility:hidden; pointer-events:none}
    .card{ position:relative; background: linear-gradient(180deg, var(--panel-top), var(--panel-bot)); border:1px solid var(--border); box-shadow: 0 10px 30px #0008, inset 0 1px 0 var(--soft), inset 0 -1px 0 #070809; border-radius:24px; padding:48px 56px; min-width: min(92vw, 680px); display:flex; flex-direction:column; align-items:center; gap:28px; backdrop-filter: blur(6px) saturate(120%); }
    .title{ font-size: clamp(20px, 3.2vw, 28px); letter-spacing: .08em; text-transform: uppercase; color:#cfd6df; text-shadow: 0 0 18px var(--glow); opacity:.9; }

    .loader{ width: 160px; height: 160px; position: relative; filter: drop-shadow(0 0 24px var(--glow)); }
    .loader::before, .loader::after{ content:""; position:absolute; inset:0; border-radius:50%; border: 8px solid transparent; }
    .loader::before{ border-top-color: var(--accent); border-left-color: #ffffff33; animation: spin 1.15s linear infinite; }
    .loader::after{ inset:18px; border: 8px solid transparent; border-right-color: #9be7ff55; border-bottom-color: #ffffff20; animation: spin 1.8s linear infinite reverse; filter: blur(0.3px); }
    .dots{display:flex; gap:10px; align-items:center; font-weight:500; color:#c9d7e3}
    .dot{width:8px; height:8px; border-radius:50%; background:#a9cfe0; opacity:.3; animation: blink 1.8s infinite}
    .dot:nth-child(2){animation-delay:.2s}
    .dot:nth-child(3){animation-delay:.4s}
    .hint{opacity:.65; font-size:14px; letter-spacing:.04em; color:#a7b4c2}
    @keyframes spin{to{transform:rotate(1turn)}}
    @keyframes blink{50%{opacity:1}}

    .badge{ position:fixed; left:16px; bottom:14px; z-index:4; font-size:12px; letter-spacing:.04em; opacity:.55 }

    .app{ position:fixed; inset:0; z-index:3; display:flex; flex-direction:column; opacity:0; visibility:hidden; pointer-events:none; transition: opacity .7s ease .05s, visibility .7s ease .05s; }
    .app.show{opacity:1; visibility:visible; pointer-events:auto}

    .topbar{ display:flex; align-items:center; justify-content:space-between; padding:12px 18px; background: linear-gradient(180deg, #0c0e13cc, #090a0dcc); border-bottom:1px solid var(--border); backdrop-filter: blur(8px) saturate(120%); }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.06em }
    .brand .dot{ width:8px;height:8px;border-radius:50%;background:var(--ok); box-shadow:0 0 14px #4ad29580 }

    .layout{
      flex:1; display:flex; gap:20px; padding:28px; align-items:center; justify-content:center; overflow:auto;
    }

    .panel{
      display:flex; gap:20px; width:min(1200px, 96vw);
    }

    .main{
      flex:1; background: linear-gradient(180deg,var(--panel-top), var(--panel-bot)); border:1px solid var(--border); border-radius:16px; padding:22px; box-shadow: 0 12px 30px #0009; display:flex; flex-direction:column; gap:14px; min-height:420px;
    }

    .hero{ display:flex; gap:18px; align-items:center; }
    .hero-left{ flex:1 }
    .h1{ font-size: clamp(20px, 3.5vw, 28px); font-weight:800; letter-spacing:.01em; text-shadow: 0 0 14px var(--glow); margin:0 }
    .lead{ color:var(--muted); margin-top:6px; max-width:70ch }

    .controls{ display:flex; gap:12px; align-items:center; margin-top:8px }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:10px; padding:12px 16px; border-radius:12px; text-decoration:none; color:#001019; font-weight:800; letter-spacing:.04em; text-transform:uppercase; background: linear-gradient(180deg, #6ee1ff, #36d1ff); box-shadow: 0 10px 26px #1cbaff40, inset 0 1px 0 #9ff0ff; border:0; transition: transform .12s ease, box-shadow .2s ease, filter .2s ease; }
    .btn.secondary{ background:transparent; color:var(--fg); border:1px solid #15202a; box-shadow:none; font-weight:700; }

    /* language switcher */
    .lang-switch{ position:fixed; right:14px; top:14px; z-index:6; display:flex; gap:8px; align-items:center; background:linear-gradient(180deg,#071016aa,#071018aa); padding:6px; border-radius:10px; border:1px solid var(--border); }
    .lang-switch button{ background:transparent; border:0; color:var(--muted); padding:6px 10px; border-radius:8px; cursor:pointer; font-weight:700 }
    .lang-switch button.active{ background:var(--accent); color:#001019; box-shadow:0 6px 18px var(--glow); }

    /* small responsiveness */
    @media (max-width:720px){ .card{ padding:28px 20px } .controls{ flex-direction:column; align-items:stretch } }
  </style>
</head>
<body>
  <canvas id="chips" aria-hidden="true"></canvas>
  <div class="vignette" aria-hidden="true"></div>

  <main class="center" id="loader" role="status" aria-live="polite">
    <section class="card">
      <div class="loader" aria-label="Loading"></div>
      <div class="title" data-i18n="loading_title">Loading</div>
      <div class="dots" aria-hidden="true">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </div>
      <div class="hint" data-i18n="loading_hint">Please wait… preparing interface</div>
    </section>
  </main>

  <div class="app" id="app" aria-hidden="true">
    <header class="topbar">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <span data-i18n="brand">FluxScan</span>
      </div>
    </header>

    <div class="layout">
      <div class="panel">
        <main class="main" role="main">
          <div class="hero">
            <div class="hero-left">
              <h1 class="h1" data-i18n="hero_title">FluxScan — Ваш помощник в производительности</h1>
              <div class="lead" data-i18n="hero_lead">Наш проект очищает мусор без рекламы, не удаляет нужные файлы и повышает стабильность вашего компьютера.</div>

              <div class="controls">
                <a class="btn" id="downloadBtn" href="https://drive.google.com/file/d/1pfECCpV7UcV8POXCAjNEqVZ8F8uOLaWt/view?usp=sharing" target="_blank" rel="noopener" role="button" data-i18n="download">Download</a>
                <a class="btn secondary" href="#" role="button" data-i18n="advanced">Advanced</a>
              </div>
            </div>

            <div style="width:180px; display:flex; align-items:center; justify-content:center;">
              <div class="loader" aria-hidden="true" style="width:120px;height:120px"></div>
            </div>
          </div>

          <section style="display:flex; gap:12px; margin-top:10px; flex-wrap:wrap;">
            <div style="flex:1; min-width:240px; background:linear-gradient(180deg,#071016,#071018); padding:12px; border-radius:12px; border:1px solid var(--border);">
              <strong data-i18n="feat_ad_free">Без рекламы</strong>
              <div class="lead" style="margin-top:8px; color:var(--muted);" data-i18n="feat_ad_free_desc">Чистый опыт без всплывающих окон и мусора.</div>
            </div>
            <div style="flex:1; min-width:240px; background:linear-gradient(180deg,#071016,#071018); padding:12px; border-radius:12px; border:1px solid var(--border);">
              <strong data-i18n="feat_safe">Безопасная очистка</strong>
              <div class="lead" style="margin-top:8px; color:var(--muted);" data-i18n="feat_safe_desc">Умные правила не удаляют важные системные и пользовательские файлы.</div>
            </div>
          </section>

          <section style="margin-top:12px; display:flex; gap:12px;">
            <div style="flex:1; min-width:240px; background:linear-gradient(180deg,#071016,#071018); padding:12px; border-radius:12px; border:1px solid var(--border);">
              <strong data-i18n="feat_stability">Больше стабильности</strong>
              <div class="lead" style="margin-top:8px; color:var(--muted);" data-i18n="feat_stability_desc">Оптимизированная система = меньше конфликтов и плавнее работа.</div>
            </div>
            <div style="flex:1; min-width:240px; background:linear-gradient(180deg,#071016,#071018); padding:12px; border-radius:12px; border:1px solid var(--border);">
              <strong data-i18n="feat_light">Лёгкость</strong>
              <div class="lead" style="margin-top:8px; color:var(--muted);" data-i18n="feat_light_desc">Минимальная нагрузка и современный быстрый интерфейс.</div>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>

  <!-- language switcher -->
  <div class="lang-switch" role="navigation" aria-label="Language switch">
    <button id="btn-ru" class="active" data-lang="ru">Русский</button>
    <button id="btn-en" data-lang="en">English</button>
  </div>

  <script>
    /* ---------------------- Falling chips animation ---------------------- */
    (function(){
      const canvas = document.getElementById('chips');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = innerWidth;
      let H = canvas.height = innerHeight;
      const DPR = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = innerWidth * DPR;
      canvas.height = innerHeight * DPR;
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.scale(DPR, DPR);

      const chips = [];
      const CHIP_COUNT = Math.round(Math.max(8, Math.min(28, innerWidth / 80)));

      function rand(min,max){ return Math.random() * (max - min) + min }

      function createChip(i){
        const w = rand(28, 72);
        const h = w * rand(0.6, 0.85);
        return {
          x: rand(-50, W+50),
          y: rand(-H, -20) - (i * rand(10,60)),
          w, h,
          r: rand(-0.7, 0.7),
          speedY: rand(30, 110),
          speedX: rand(-20, 20),
          rotSpeed: rand(-0.6,0.6),
          sway: rand(0.5, 1.5),
          hue: rand(180,210),
          opacity: rand(0.18, 0.7)
        }
      }

      for(let i=0;i<CHIP_COUNT;i++) chips.push(createChip(i));

      function drawChip(chip){
        ctx.save();
        ctx.translate(chip.x + chip.w/2, chip.y + chip.h/2);
        ctx.rotate(chip.r);

        // body
        const bw = chip.w, bh = chip.h;
        const grad = ctx.createLinearGradient(-bw/2, -bh/2, bw/2, bh/2);
        grad.addColorStop(0, `hsla(${chip.hue}, 80%, 40%, ${chip.opacity})`);
        grad.addColorStop(1, `hsla(${chip.hue+18}, 90%, 22%, ${chip.opacity + 0.02})`);
        ctx.fillStyle = grad;
        roundRect(ctx, -bw/2, -bh/2, bw, bh, Math.min(8, bh*0.18));
        ctx.fill();

        // pins - little golden legs on two sides
        const pinCount = Math.max(3, Math.floor(bw / 14));
        ctx.fillStyle = 'rgba(255,220,140,0.95)';
        for(let i=0;i<pinCount;i++){
          const px = -bw/2 + 6 + i * ((bw-12) / pinCount);
          // top pins
          ctx.fillRect(px, -bh/2 - 4, 4, 6);
          // bottom pins
          ctx.fillRect(px, bh/2 - 2, 4, 6);
        }

        // small marking
        ctx.fillStyle = 'rgba(255,255,255,0.85)';
        ctx.font = Math.max(9, Math.round(bh*0.22)) + 'px monospace';
        ctx.textAlign = 'center';
        ctx.fillText('IC', 0, 4);

        // soft shadow/inner glow
        ctx.globalCompositeOperation = 'overlay';
        ctx.fillStyle = 'rgba(255,255,255,0.02)';
        roundRect(ctx, -bw/2+2, -bh/2+2, bw-4, bh-4, Math.min(6, bh*0.15));
        ctx.fill();

        ctx.restore();
      }

      function roundRect(ctx,x,y,w,h,r){
        ctx.beginPath();
        ctx.moveTo(x+r,y);
        ctx.arcTo(x+w,y,x+w,y+h,r);
        ctx.arcTo(x+w,y+h,x,y+h,r);
        ctx.arcTo(x,y+h,x,y,r);
        ctx.arcTo(x,y,x+w,y,r);
        ctx.closePath();
      }

      let last = performance.now();
      function loop(now){
        const dt = Math.min(40, now - last) / 1000; last = now;
        ctx.clearRect(0,0,W,H);
        for(let i=0;i<chips.length;i++){
          const c = chips[i];
          c.y += c.speedY * dt;
          c.x += Math.sin(now/1000 * c.sway + i) * (c.speedX * dt);
          c.r += c.rotSpeed * dt * 0.5;

          // gentle parallax / fade near edges
          if(c.y - c.h > H){
            // respawn at top
            Object.assign(c, createChip(i), { y: -rand(20, 160) });
          }

          drawChip(c);
        }
        requestAnimationFrame(loop);
      }

      requestAnimationFrame(loop);

      window.addEventListener('resize', ()=>{
        W = canvas.width = innerWidth * DPR;
        H = canvas.height = innerHeight * DPR;
        canvas.style.width = innerWidth + 'px';
        canvas.style.height = innerHeight + 'px';
        ctx.setTransform(DPR,0,0,DPR,0,0);
      });
    })();

    /* ---------------------- Language switcher (RU/EN) ---------------------- */
    (function(){
      const translations = {
        ru: {
          loading_title: 'Загрузка',
          loading_hint: 'Пожалуйста подождите… готовим интерфейс',
          brand: 'FluxScan',
          hero_title: 'FluxScan — Ваш помощник в производительности',
          hero_lead: 'Наш проект очищает мусор без рекламы, не удаляет нужные файлы и повышает стабильность вашего компьютера.',
          download: 'Скачать',
          advanced: 'Дополнительно',
          feat_ad_free: 'Без рекламы',
          feat_ad_free_desc: 'Чистый опыт без всплывающих окон и мусора.',
          feat_safe: 'Безопасная очистка',
          feat_safe_desc: 'Умные правила не удаляют важные системные и пользовательские файлы.',
          feat_stability: 'Больше стабильности',
          feat_stability_desc: 'Оптимизированная система = меньше конфликтов и плавнее работа.',
          feat_light: 'Лёгкость',
          feat_light_desc: 'Минимальная нагрузка и современный быстрый интерфейс.'
        },
        en: {
          loading_title: 'Loading',
          loading_hint: 'Please wait… preparing interface',
          brand: 'FluxScan',
          hero_title: 'FluxScan — Your performance assistant',
          hero_lead: 'Our tool cleans junk without ads, won\'t remove important files and improves system stability.',
          download: 'Download',
          advanced: 'Advanced',
          feat_ad_free: 'Ad-free',
          feat_ad_free_desc: 'A clean experience without pop-ups and clutter.',
          feat_safe: 'Safe cleaning',
          feat_safe_desc: 'Smart rules that don\'t remove important system or user files.',
          feat_stability: 'More stability',
          feat_stability_desc: 'Optimized system = fewer conflicts and smoother operation.',
          feat_light: 'Lightweight',
          feat_light_desc: 'Minimal overhead and a modern fast interface.'
        }
      };

      function applyLang(lang){
        document.documentElement.lang = (lang === 'ru') ? 'ru' : 'en';
        document.querySelectorAll('[data-i18n]').forEach(el=>{
          const key = el.getAttribute('data-i18n');
          if(translations[lang] && translations[lang][key]){
            el.textContent = translations[lang][key];
          }
        });

        // mark active button
        document.querySelectorAll('.lang-switch button').forEach(b=>b.classList.toggle('active', b.getAttribute('data-lang') === lang));
      }

      document.getElementById('btn-ru').addEventListener('click', ()=> applyLang('ru'));
      document.getElementById('btn-en').addEventListener('click', ()=> applyLang('en'));

      // default to russian
      applyLang('ru');

      /* keep original loader -> app flow */
      const loader = document.getElementById('loader');
      const app = document.getElementById('app');
      setTimeout(()=>{
        loader.classList.add('hidden');
        app.classList.add('show');
        app.setAttribute('aria-hidden','false');
      }, 5000);
    })();
  </script>
</body>
</html>
